<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="RecruitmentMapper">
	<resultMap type="Recruitment" id="recruitmentResultMap">
		<id property="recruitmentNo" column="RECRUITMENT_NO"/>
		<result property="recruitmentTitle" column="RECRUITMENT_TITLE"/>
		<result property="recruitmentCompanyName" column="RECRUITMENT_COMPANY_NAME"/>
		<result property="recruitmentCareer" column="RECRUITMENT_CAREER"/>
		<result property="recruitmentEducation" column="RECRUITMENT_EDUCATION"/>
		<result property="recruitmentPrefer" column="RECRUITMENT_PREFER"/>
		<result property="recruitmentType" column="RECRUITMENT_TYPE"/>
		<result property="recruitmentSalary" column="RECRUITMENT_SALARY"/>
		<result property="recruitmentRegion" column="RECRUITMENT_REGION"/>
		<result property="recruitmentDate" column="RECRUITMENT_DATE"/>
		<result property="recruitmentStartDate" column="RECRUITMENT_START_DATE"/>
		<result property="recruitmentEndDate" column="RECRUITMENT_END_DATE"/>
		<result property="recruitmentWriter" column="RECRUITMENT_WRITER"/>
		<result property="recruitmentCount" column="RECRUITMENT_COUNT"/>		
	</resultMap>
	
	<!-- 전체 조회 -->
	<select id="selectAllRecruitment" resultMap="recruitmentResultMap">
		SELECT * FROM RECRUITMENT_TBL ORDER BY RECRUITMENT_NO DESC
	</select> 
	<!-- 상세 조회 -->
	<select id="selectOneRecruitment" resultMap="recruitmentResultMap">
		SELECT * FROM RECRUITMENT_TBL WHERE RECRUITMENT_NO = #{recruitmentNo}
	</select>
	<!-- 검색 -->
	<select id="selectSearchRecruitment" resultMap="recruitmentResultMap">
		SELECT * FROM RECRUITMENT_TBL
		<if test="searchCondition.toString() == 'title'">
			WHERE RECRUITMENT_WRITER LIKE '%' || #{searchValue} || '%'
		</if>
	</select>
	
	<insert id="insertRecruitment" parameterType="Recruitment">
		INSERT INTO RECRUITMENT_TBL VALUES(SEQ_RECRUITMENT_NO.NEXTVAL
		, #{recruitmentTitle}
		, #{recruitmentCompanyName}
		, #{recruitmentCareer}
		, #{recruitmentEducation}
		, #{recruitmentPrefer}
		, #{recruitmentType}
		, #{recruitmentSalary}
		, #{recruitmentRegion}
		, DEFAULT
		, #{recruitmentStartDate}
		, #{recruitmentEndDate}
		, #{recruitmentWriter}
		, DEFAULT
		)		
	</insert>
	
	<update id="updateCountRecruitment">
		UPDATE RECRUITMENT_TBL SET RECRUITMENT_COUNT = RECRUITMENT_COUNT + 1 WHERE RECRUITMENT_NO = #{recruitmentNo}
	</update>
</mapper>